/*! uzai - v0.1.11 - 2016 */
/*!
 * jsonchou 分页
 * v: 1.1
 * d: 2014-3-6
*/
!function(a){a.fn.uzPager=function(b){var c=window._tap||"click",d=a.extend({},a.fn.uzPager.option,b);return this.each(function(b,e){var f=a(this),g=d.clonePagerNode,h=0,i=function(a){var b=null;d.targetNode&&(b=d.targetNode.find("li"),b.get(0)||(b=d.targetNode.find("tr"))),d.pageItems=d.targetNode?b.length:d.pageItems,d.currentPage=a?a:d.currentPage,h=Math.ceil(d.pageItems/d.pageSize);var c=parseInt(d.currentPage,10)+parseInt(1,10),e=Math.abs(parseInt(d.currentPage,10)-parseInt(1,10)),i=[];i.push("<span class='pager-info'>查询到"+d.pageItems+"条 "+d.currentPage+"/"+h+" </span>"),i.push('<span class="pager-con"> '),i.push("<a"+(e>0?" rel='"+e+"' class='item prev'":" class='item prev disabled'")+"><i class='i-prev'></i><em>上一页</em></a>");var k=parseInt(d.currentPage,10)-parseInt(d.sides,10),l=parseInt(d.currentPage,10)+parseInt(d.sides,10),m=k>0?k:1,n=l<parseInt(h,10)?l:h;m>1&&m-1!="1"?(i.push('<a class="item '+(1==d.currentPage?"disabled on":"")+'" rel="1">1</a>'),i.push('<a class="dot">...</a>')):m-1=="1"&&i.push('<a class="item '+(1==d.currentPage?"disabled on":"")+'" rel="1">1</a>');for(var o=m;n>=o;o++)i.push('<a class="item '+(d.currentPage==o?"disabled on":"")+'" rel="'+o+'">'+o+"</a>");h>n&&h-n!="1"?(i.push('<a class="dot">...</a>'),i.push('<a class="item '+(d.currentPage==h?"disabled on":"")+'" rel="'+h+'">'+h+"</a>")):h-n=="1"&&i.push('<a class="item '+(d.currentPage==h?"disabled on":"")+'" rel="'+h+'">'+h+"</a>"),i.push("<a "+(h>=c?'"  rel="'+c+'" class="item next"':' class="item next disabled"')+" ><em>下一页</em><i class='i-next'></i></a>"),i.push("</span>"),i.push("到<input class='ipt-num' type='text' />页 <input type='button'  class='ipt-btn'  value='确定'>"),d.pageItems<=0?(f.hide(),g&&g.hide()):(f.html(i.join("")),f.show(),g&&(g.html(i.join("")),g.show())),j()},j=function(){if(d.targetNode){var b=d.currentPage,c=d.targetNode,e=d.pageSize,f=c.find("li");f.get(0)||(f=c.find("tr")),f.hide();var g=(b-1)*e,h=b*e-1;f.each(function(b,c){var d=a(this);if(b>=g&&h>=b){d.show();var e=d.find("img");e.each(function(){var b=a(this),c=b.attr("data-src");c||(c=b.attr("data-original")),c&&b.attr("src",c)})}})}},k=function(b){b.off(c,"a:not(.disabled)").on(c,"a:not(.disabled)",function(){var b=a(this).attr("rel");i(b),d.onCallback(d.currentPage,h)}),b.off(c,"input:button").on(c,"input:button",function(){var b=a(this),c=b.siblings(".ipt-num"),e=c.val();return!e||isNaN(parseInt(e,10))||parseInt(e,10)>h?(c.addClass("ipt-num-off"),c.focus(),c.val(""),!1):(c.removeClass("ipt-num-off"),i(parseInt(e,10)),d.onCallback(d.currentPage,h),void 0)}),b.off("keydown","input:text").on("keydown","input:text",function(b){var d=a(this),e=d.siblings(".ipt-btn"),f=b.keyCode?b.keyCode:b.which;"13"==f&&e.trigger(c)})};k(f),g&&k(g),i(d.currentPage),d.onInit(h)})},a.fn.uzPager.option={pageSize:10,pageItems:100,currentPage:1,clonePagerNode:"",targetNode:"",edges:2,sides:2,onInit:function(a){},onCallback:function(a,b){}}}(jQuery);